import{b as o}from"./functions.BAgsSORx.js";const n=o("/assets/stars.webp"),a=Math.PI*2;class l{constructor(t,i){this.texture=t,this.frame=i,this.width=i.width,this.height=i.height,this.originX=i.width/2,this.originY=i.height/2}alive=!1;x=0;y=0;vx=0;vy=0;alpha=1;rotation=0;scale=1;theta=0;drag=1;wander=.5;matrix={a:1,b:0,c:0,d:1,tx:0,ty:0};width;height;originX;originY;init(t=0,i=0){const s=r(a),h=r(2,6);return this.x=t,this.y=i,this.alpha=1,this.alive=!0,this.theta=s,this.vx=Math.sin(s)*h,this.vy=Math.cos(s)*h,this.rotation=Math.atan2(this.vy,this.vx),this.drag=r(.82,.97),this.scale=r(.1,1),this.wander=r(.5,1),this.matrix={a:1,b:0,c:0,d:1,tx:0,ty:0},this}update(){const t=this.matrix;this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.vy*=this.drag,this.theta+=r(-.5,.5)*this.wander,this.vx+=Math.sin(this.theta)*.1,this.vy+=Math.cos(this.theta)*.1,this.rotation=Math.atan2(this.vy,this.vx),this.alpha*=.98,this.scale*=.985,this.alive=this.scale>.06&&this.alpha>.06;const i=Math.cos(this.rotation)*this.scale,s=Math.sin(this.rotation)*this.scale;return t.a=i,t.b=s,t.c=-s,t.d=i,t.tx=this.x-(this.originX*t.a+this.originY*t.c),t.ty=this.y-(this.originX*t.b+this.originY*t.d),this}draw(t){const i=this.matrix,s=this.frame;return t.globalAlpha=this.alpha,t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),t.drawImage(this.texture,s.x,s.y,s.width,s.height,0,0,this.width,this.height),this}}class p{constructor(t){this.options=t,Object.assign(this,t),this.bufferContext=this.buffer.getContext("2d"),this.supportsFilters=typeof this.bufferContext.filter<"u",this.context=this.options.view.getContext("2d",{alpha:!1})}pool=[];particles=[];pointer={x:-9999,y:-9999};buffer=document.createElement("canvas");bufferContext;supportsFilters;width=0;height=0;context;pointerMove=t=>{t.preventDefault();const i="touches"in t?t.touches[0]:t;this.pointer.x=i.clientX,this.pointer.y=i.clientY;for(let s=0;s<r(2,7);s++)this.spawn(this.pointer.x,this.pointer.y)};resize=()=>{this.width=this.buffer.width=this.options.view.width=window.innerWidth,this.height=this.buffer.height=this.options.view.height=window.innerHeight};render=()=>{const t=this.context,i=this.bufferContext;t.fillStyle=this.options.backgroundColor,t.fillRect(0,0,this.width,this.height),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.width,this.height),i.globalCompositeOperation=this.options.blendMode;for(let s=0;s<this.particles.length;s++){const h=this.particles[s];h.alive?h.update():(this.pool.push(h),d(this.particles,s,1))}for(const s of this.particles)s.draw(i);this.supportsFilters&&(this.options.useBlurFilter&&(t.filter=`blur(${this.options.filterBlur}px)`),t.drawImage(this.buffer,0,0),this.options.useContrastFilter&&(t.filter=`contrast(${this.options.filterContrast}%)`)),t.drawImage(this.buffer,0,0),t.filter="none",requestAnimationFrame(this.render)};spawn(t,i){let s;return this.particles.length>this.options.maxParticles?s=this.particles.shift():this.pool.length?s=this.pool.pop():s=new l(this.options.texture,f(this.options.frames)),s.init(t,i),this.particles.push(s),this}start(){return this.resize(),this.render(),window.PointerEvent?window.addEventListener("pointermove",this.pointerMove):(window.addEventListener("mousemove",this.pointerMove),window.addEventListener("touchmove",this.pointerMove)),window.addEventListener("resize",this.resize),requestAnimationFrame(this.render),this}}function c(e,t,i){const s=[];for(let h=0;h<e;h++)s.push({x:t*h,y:0,width:t,height:i});return s}function d(e,t,i){if(!(t>=e.length||i===0)){i=t+i>e.length?e.length-t:i;for(let s=t;s<e.length-i;s++)e[s]=e[s+i];e.length-=i}}function r(e,t){return t==null&&(t=e,e=0),e>t&&([e,t]=[t,e]),e+(t-e)*Math.random()}function f(e){return e[Math.random()*e.length|0]}window.addEventListener("load",()=>{const e=document.querySelector("#view"),t=new Image;t.src=n,new p({view:e,texture:t,frames:c(5,80,80),maxParticles:2e3,backgroundColor:"#111111",blendMode:"lighter",filterBlur:50,filterContrast:300,useBlurFilter:!0,useContrastFilter:!0}).start()});
